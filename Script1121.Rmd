---
title: "script1121"
author: "Guangze Sun"
date: "2024-11-22"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(dplyr)
library(stringr)
```

```{r}
data <- read.csv('trains_train.csv') %>% 
  filter(to != "000000000") %>% 
  mutate(
    OD = paste(from, to, sep = "/"),
    Type = ifelse(
      str_detect(vehicle, "[A-Za-z]"),
      str_extract(vehicle, "^[A-Za-z]+"),
      "Extra"
    ),
    occupancy_numeric = case_when(
      occupancy == "high" ~ 2,
      occupancy == "medium" ~ 1,
      occupancy == "low" ~ 0)
  ) %>%
  dplyr::select(-connection, -occupancy)
```